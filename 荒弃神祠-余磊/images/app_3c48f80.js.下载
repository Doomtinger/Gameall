function canvasApp(a){function t(){c=1,u=c-1,h=8,v=275,p=165,x=106,S="rgba("+v+","+p+","+x+",",f=1,r=O.width,i=O.height,M=320,m=r/2,y=i/2,V=M-2,s={},d={},b=.1,T=.1,w=.1,L=0,Z=1,Y=280,j=0,I=0,P=-3-Y,z=-750,X=3*Math.PI/1600,k=0,o=setInterval(e,1e3/24),e(),setTimeout(function(){a&&a()},1e3)}function e(){if(removeLoading&&clearInterval(o),u++,u>=c)for(u=0,F=0;h>F;F++){G=2*Math.random()*Math.PI,H=Math.acos(2*Math.random()-1),J=Y*Math.sin(H)*Math.cos(G),K=Y*Math.sin(H)*Math.sin(G),N=Y*Math.cos(H);var a=l(J,I+K,P+N,.002*J,.002*K,.002*N);a.attack=50,a.hold=50,a.decay=160,a.initValue=0,a.holdValue=f,a.lastValue=0,a.stuckTime=80+20*Math.random(),a.accelX=0,a.accelY=L,a.accelZ=0}for(k=(k+X)%(2*Math.PI),C=Math.sin(k),E=Math.cos(k),Q.fillStyle="#000000",Q.fillRect(0,0,r,i),a=s.first;null!=a;)B=a.next,a.age++,a.age>a.stuckTime&&(a.velX+=a.accelX+b*(2*Math.random()-1),a.velY+=a.accelY+T*(2*Math.random()-1),a.velZ+=a.accelZ+w*(2*Math.random()-1),a.x+=a.velX,a.y+=a.velY,a.z+=a.velZ),R=E*a.x+C*(a.z-P),q=-C*a.x+E*(a.z-P)+P,g=M/(M-q),a.projX=R*g+m,a.projY=a.y*g+y,a.age<a.attack+a.hold+a.decay?a.age<a.attack?a.alpha=(a.holdValue-a.initValue)/a.attack*a.age+a.initValue:a.age<a.attack+a.hold?a.alpha=a.holdValue:a.age<a.attack+a.hold+a.decay&&(a.alpha=(a.lastValue-a.holdValue)/a.decay*(a.age-a.attack-a.hold)+a.holdValue):a.dead=!0,A=a.projX>r||a.projX<0||a.projY<0||a.projY>i||q>V?!0:!1,A||a.dead?n(a):(D=1-q/z,D=D>1?1:0>D?0:D,Q.fillStyle=S+D*a.alpha+")",Q.beginPath(),Q.arc(a.projX,a.projY,g*Z,0,2*Math.PI,!1),Q.closePath(),Q.fill()),a=B}function l(a,t,e,l,n,r){var i;return null!=d.first?(i=d.first,null!=i.next?(d.first=i.next,i.next.prev=null):d.first=null):i={},null==s.first?(s.first=i,i.prev=null,i.next=null):(i.next=s.first,s.first.prev=i,s.first=i,i.prev=null),i.x=a,i.y=t,i.z=e,i.velX=l,i.velY=n,i.velZ=r,i.age=0,i.dead=!1,i.right=Math.random()<.5?!0:!1,i}function n(a){s.first==a?null!=a.next?(a.next.prev=null,s.first=a.next):s.first=null:null==a.next?a.prev.next=null:(a.prev.next=a.next,a.next.prev=a.prev),null==d.first?(d.first=a,a.prev=null,a.next=null):(a.next=d.first,d.first.prev=a,d.first=a,a.prev=null)}if(support("canvas")){var r,i,o,c,u,h,s,d,f,v,p,x,M,g,m,y,V,k,X,Y,j,I,P,Z,z,b,T,w,L,S,A,B,C,E,R,q,D,F,G,H,J,K,N,O=document.getElementById("canvasLoading"),Q=O.getContext("2d");$.browser.msie||t()}}
;window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}());
;var support=function(){var n={isIE:function(){return/(msie|trident)/.test(navigator.userAgent.toLowerCase())},transition:function(){var n=function(){var n,t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(n in e)if(void 0!==t.style[n])return e[n]}();return n&&{end:n}},animation:function(){var n=function(){var n,t=document.createElement("bootstrap"),e={WebkitAnimationName:"webkitAnimationEnd",MozAnimationName:"animationend",OAnimationName:"oanimationend",msAnimationName:"animationend",animation:"animationend"};for(n in e)if(void 0!==t.style[n])return e[n]}();return n&&{end:n}},video:function(){var n=!1,t=document.createElement("video");return t.canPlayType&&t.canPlayType("video/mp4").replace(/no/,"")&&(n=!0),n},transform:function(){for(var n,t=["-webkit-","-o-","-moz-","-ms-",""],e=document.createElement("p"),i=0,o=t.length;o>i;i++)if(n=utils.toCamelCase(t[i]+"transform"),n in e.style)return n;return!1},canvas:function(){return!!document.createElement("canvas").getContext},svg:function(){var n="http://www.w3.org/2000/svg";return!!document.createElementNS&&!!document.createElementNS(n,"svg").createSVGRect}};return function(t){return"function"==typeof n[t]&&(n[t]=n[t].apply(n)),n[t]}}();
;var videoPlayer=function(){var e=$(".js-modal"),n={};return e.find(".js-content").height(0),n.open=function(n,o){e.fadeIn(function(){e.find(".js-content").animate({height:540})}),$.flash.available&&e.find(".js-body").flash({swf:"https://tianyu.res.netease.com/gw/14v4/player/player.swf",width:"100%",height:"100%",wmode:"transparent",allowscriptaccess:"always",allowFullScreen:"true",flashvars:{v1:n,v2:o}}),(navigator.userAgent.indexOf("compatible; MSIE 9.0;")>-1||!$.flash.available)&&e.find(".js-body").html('<video width="960" height="540" controls="controls" autoplay=true style="background-color: #000;"><source src="'+n+'" type="video/mp4"></video>')},n.close=function(){e.find(".js-content").animate({height:0},function(){e.find(".js-body").html(""),e.fadeOut()})},e.on("click",".js-close",function(){supportAudio()&&(GLOBAL.MUSICPAUSE||$(".js-music").trigger("on")),n.close(),n.onClose&&n.onClose()}),n}();
;var screenController=function(){var e=!1,n=$(".js-fullscreen");return{initEvent:function(){n.on("click",function(){screenController.toggleFullscreen()})},launchFullScreen:function(e){return function(){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}},cancelFullscreen:function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},toggleFullscreen:function(){e?(e=!1,n.attr("title","\u5168\u5c4f\u5c55\u793a"),this.cancelFullscreen()):(e=!0,n.attr("title","\u53d6\u6d88\u5168\u5c4f"),this.launchFullScreen(document.documentElement)())}}}();
;var bossController=function(){function s(){o.on("mousewheel DOMMouseScroll",function(s){s.stopPropagation(),s.preventDefault();var e=s.originalEvent.wheelDelta||-s.originalEvent.detail||s.deltaY;if(!mousewheeling)if(mousewheeling=!0,0>e){var t=EVENTINFO.currentBoss,o=EVENTINFO.bossList.indexOf(t),i=o===EVENTINFO.bossList.length-1?null:EVENTINFO.bossList[o+1];if(null!==i){var n=EVENTINFO.bossList.indexOf(i)+1;$(".js-nav[data-bind="+n+"]").trigger("activemouse")}else mousewheeling=!1}else{var t=EVENTINFO.currentBoss,o=EVENTINFO.bossList.indexOf(t),a=0===o?null:EVENTINFO.bossList[o-1];if(null!==a){var n=EVENTINFO.bossList.indexOf(a)+1;$(".js-nav[data-bind="+n+"]").trigger("activemouse")}else mousewheeling=!1}}),t.on("active",function(s){e=s.clientX;var t=$(this);setTimeout(function(){t.find(".js-boss-name").animate({top:"108px"},500,function(){t.find(".js-boss-type").fadeTo("slow",1).removeClass("transparent"),t.find(".js-boss-video").fadeTo("slow",1).removeClass("transparent"),t.find(".js-boss-introduce").fadeTo("slow",1).removeClass("transparent")}),t.find(".js-boss-logo").animate({top:"0px"})},800)}).on("leave",function(){var s=$(this);s.find(".js-boss-type").fadeOut(100),s.find(".js-boss-video").fadeOut(100),s.find(".js-boss-introduce").fadeOut(100),s.find(".js-boss-name").animate({top:"-360px"},500,function(){}),s.find(".js-boss-logo").animate({top:"-400px"})}).on("mousemove",function(s){s.preventDefault(),s.stopPropagation(),i=!0,i&&(i=!1,$(s.target).hasClass("js-boss-video")||$(s.target).hasClass("js-play-boss-video")||$(s.target).hasClass("video-img")||$(s.target).hasClass("boss-video")||(void 0===e?e=s.clientX:(e-s.clientX<0?$(this).find(".file").removeClass("file--active-right").addClass("file--active-left"):e-s.clientX>0&&$(this).find(".file").removeClass("file--active-left").addClass("file--active-right"),e=s.clientX)))})}var e,t=$(".js-boss"),o=$(".js-boss-wrap"),i=!0;return $(".js-back-to-land").on("click",function(){threejsController.boss2Land()}),{initEvent:s,showBoss:function(s){$(".js-nav[data-bind="+s+"]").trigger("active")},switchBoss:function(s,e){var t=EVENTINFO.bossList[s-1].name,o=$(".js-boss[data-name="+t+"]");$(".js-boss").not(o).trigger("leave"),$(".js-boss").not(o).fadeOut(500,function(){setTimeout(function(){o.trigger("active"),o.fadeIn(500,function(){mousewheeling=!1,e&&e()}).removeClass("hide")},500)})}}}();
;function checkLoadingFinish(){GLOBAL.LOADINGTEXTFINISH?viewController.onObjLoaded():requestAnimationFrame(checkLoadingFinish)}function iecheckLoadingFinish(){if(GLOBAL.LOADINGTEXTFINISH){viewController.onObjLoaded(),$(".js-explore").css({top:"700px"}),$(".js-enter-subtitle").fadeIn(),$(".js-explore").fadeIn(),$(".js-enter-title").addClass("ie-enter-title"),$(".js-land-mask").remove(),$(".js-mouse-guide").remove(),$(".js-webgl").addClass("ie-land-bg"),$(".js-ie-boss-list").fadeIn(),$(".js-ie-boss").on("click",function(){GLOBAL.MODE2ENABLED=!0;var e=$(this).data("idx");switch($(".js-webgl").hide(),$(".js-nav-p").show(),$(".js-boss-wrap").removeClass("hide"),e){case 1:e=2;break;case 2:e=3;break;case 3:e=4;break;case 4:e=1}$(".js-nav[data-bind="+e+"]").trigger("ieactive")});var e=$(".js-nav");e.on("ieactive",function(){$(this);e.not($(this)).removeClass("nav__list--active").removeClass("nav__list--hover"),$(this).removeClass("nav__list--hover").addClass("nav__list--active");var s=$(this).data("bind");switch(s){case 1:s=4;break;case 2:s=1;break;case 3:s=2;break;case 4:s=3}$(".js-boss").not($(".js-boss"+s)).fadeOut(),$(".js-boss"+s).fadeIn().trigger("active")}),$(".nav__intro ").removeClass("transparent"),$(".js-nav").off("click").on("click",function(e){$(e.target).trigger("ieactive")}),$(".js-back-to-land").off("click").on("click",function(){$(".js-boss").fadeOut(),$(".js-webgl").fadeIn()}),$(".js-ie-boss-intro-list").addClass("ie-block-fix").show(),$(".intro-canvas").remove(),$(".js-ie-boss").on("mouseover",function(){var e=$(this).data("idx");$(".js-ie-boss-intro").hide(),$(".js-ie-boss-intro[data-idx="+e+"]").show()});var s=$(".js-boss-video");s.on("click",function(){var e=$(this).data();arrowState=-1,videoPlayer.open(e.hd,e.hd)}),s.on("mouseover",function(){$(this).find(".js-play-boss-video").addClass("play--hover")}).on("mouseout",function(){$(this).find(".js-play-boss-video").removeClass("play--hover")})}else requestAnimationFrame(iecheckLoadingFinish)}function otherBrowserInit(){viewController.onObjLoaded(),$(".js-explore").css({top:"700px"}),$(".js-enter-subtitle").fadeIn(),$(".js-explore").fadeIn(),$(".js-land-mask").remove(),$(".js-mouse-guide").remove(),$(".js-webgl").addClass("ie-land-bg"),$(".js-ie-boss-list").fadeIn(),$(".js-ie-boss").on("click",function(){GLOBAL.MODE2ENABLED=!0;var e=$(this).data("idx");switch($(".js-webgl").hide(),$(".js-nav-p").show(),$(".js-boss-wrap").removeClass("hide"),e){case 1:e=2;break;case 2:e=3;break;case 3:e=4;break;case 4:e=1}$(".js-nav[data-bind="+e+"]").trigger("ieactive")}),$(".nav__intro ").removeClass("transparent"),$(".js-nav").off("click").on("click",function(e){$(e.target).trigger("ieactive")}),$(".js-back-to-land").off("click").on("click",function(){$(".js-boss").fadeOut(),$(".js-webgl").fadeIn()}),$(".js-ie-boss-intro-list").addClass("ie-block-fix").show(),$(".intro-canvas").remove(),$(".js-ie-boss").on("mouseover",function(){var e=$(this).data("idx");$(".js-ie-boss-intro").hide(),$(".js-ie-boss-intro[data-idx="+e+"]").show()})}var removeLoading=!1,mousewheeling=!1,scrollController=function(){var e=$(".js-enter"),s=$(".js-explore");e.one("mousewheel DOMMouseScroll",function(){s.click()})}(),globalController=function(){function e(){$(".js-introduce-type").fadeOut(),$(".js-transparent").fadeOut(function(){$(this).removeClass("transparent")}),$(".js-nav-p").fadeOut(function(){$(this).removeClass("transparent")}),$(".js-boss").fadeOut()}var s=$(window).height(),o=$(window).width();return e(),{windowInfo:{windowHeight:s,windowWidth:o}}}(),loadingController=function(){{var e=$("#canvasLoading"),s=e.offset(),o=(s.left,s.top,e.width(),e.height(),0),t=$(".js-loading__introduce-line");$(".js-loading-progress")}return{showLoadingText:function(){if(o===t.length)return void(GLOBAL.LOADINGTEXTFINISH=!0);t.eq(o).addClass("loading__introduce--active");var e=this;setTimeout(function(){t.eq(o).removeClass("loading__introduce--active").addClass("loading__introduce--disappear"),o++,e.showLoadingText()},t.eq(o).data("time"))}}}(),viewController=function(){var e=$(".js-loading"),s=$(".js-enter"),o=$(".js-explore"),t=$(".js-enter-text"),n=$(".js-enter-subtitle");return{onObjLoaded:function(){e.fadeOut(3e3,function(){removeLoading=!0,$(".js-controller").addClass("controller__show"),$(".logo").fadeIn(2e3),s.fadeIn(2e3,function(){$(this).addClass("active")}),$("#canvasLoading").remove(),e.remove(),e=null})},init:function(){s.fadeOut(),o.fadeOut(),t.fadeOut(),n.fadeOut(),$(".logo").fadeOut().removeClass("transparent"),canvasApp(function(){setTimeout(function(){GLOBAL.LOADINGTEXTFINISH=!0},5e3)}),$(".js-webgl").fadeOut(function(){$(this).removeClass("transparent")}),$.browser.msie?iecheckLoadingFinish():Detector.webgl?(threejsController.init(),threejsController.render()):otherBrowserInit()}}}(),navController=function(){function e(){s.on("mouseover",function(e){e.stopPropagation(),e.preventDefault(),s.not($(this)).removeClass("nav__list--hover"),$(this).hasClass("nav__list--active")||$(this).addClass("nav__list--hover")}).on("mouseout",function(e){e.stopPropagation(),e.preventDefault(),s.removeClass("nav__list--hover")}).on("click",function(e){e.stopPropagation(),e.preventDefault(),mousewheeling||(GLOBAL.MODE2ENABLED||(introController.clearIntroduce(),GLOBAL.DRAWDOWN=!0),$(this).trigger("activemouse"))}).on("active",function(){s.not($(this)).removeClass("nav__list--active").removeClass("nav__list--hover"),$(this).removeClass("nav__list--hover").addClass("nav__list--active");var e=$(this).data("bind");EVENTINFO.currentBoss==EVENTINFO.bossList[e-1]?(EVENTINFO.donotdraw=!0,threejsController.land2Boss(function(){var s=EVENTINFO.bossList[e-1].name,o=$(".js-boss[data-name="+s+"]");$(".js-boss-wrap").removeClass("hide").addClass("active").fadeIn(),$(".js-boss-bg").removeClass("boss-bg--active"),o.fadeIn().removeClass("hide").trigger("active")})):(EVENTINFO.currentBoss=EVENTINFO.bossList[e-1],EVENTINFO.donotdraw=!1,threejsController.camera2TargetPosition(EVENTINFO.bossList[e-1],function(){threejsController.land2Boss(function(){var s=EVENTINFO.bossList[e-1].name,o=$(".js-boss[data-name="+s+"]");$(".js-boss-wrap").removeClass("hide").addClass("active").fadeIn(),o.fadeIn().removeClass("hide").trigger("active")})}))}).on("activemouse",function(e){s.not($(this)).removeClass("nav__list--active").removeClass("nav__list--hover"),$(this).removeClass("nav__list--hover").addClass("nav__list--active");var o=($(this),$(this).data("bind"));if(GLOBAL.MODE2ENABLED){var t=$(e.target).data("bind"),n=EVENTINFO.bossList[t-1];EVENTINFO.currentBoss=n,bossController.switchBoss(t)}else EVENTINFO.currentBoss=EVENTINFO.bossList[o-1],threejsController.camera2TargetPosition(EVENTINFO.bossList[o-1],function(){})}).on("ieactive",function(){$(this);s.not($(this)).removeClass("nav__list--active").removeClass("nav__list--hover"),$(this).removeClass("nav__list--hover").addClass("nav__list--active");var e=$(this).data("bind");switch(e){case 1:e=4;break;case 2:e=1;break;case 3:e=2;break;case 4:e=3}$(".js-boss").not($(".js-boss"+e)).fadeOut(),$(".js-boss"+e).fadeIn().trigger("active")})}var s=$(".js-nav");return{initEvent:e}}(),EventController=function(){function e(){function e(){n<t.length?o=setTimeout(function(){var e=t[n].data("dir"),s=t[n].data("val");"top"===e?t[n].animate({top:s+"px"}).fadeIn(a):"left"===e?t[n].animate({left:s+"px"}).fadeIn(a):"bottom"===e?t[n].animate({bottom:s+"px"}).fadeIn(a):"right"===e?t[n].animate({right:s+"px"}).fadeIn(a):t[n].fadeIn(a),n++},10):n===t.length?(clearTimeout(o),o=null,GLOBAL.MOUSEGUIDECANCLEAR=!0,setTimeout(function(){g.trigger("mousedown")},1e3)):clearTimeout(o)}var s=$(".js-mouse-guide");s.find(".mouse-guide-mouse").fadeIn(),s.find(".mouse-guide-tips-text1").fadeIn(),s.find(".mouse-guide-tips-text2").fadeIn(function(){$(".mouse-guide-mouse").addClass("mouse-guide-mouse--active"),setTimeout(function(){e()},1e3)});var o,t=b,n=0,a=function(){e()}}function s(e){g.fadeOut(function(){e&&e()}),C.fadeOut(function(){$(this).remove()})}function o(){support&&support("animation")&&v.on(support("animation").end,function(){c.animate({top:"360px"},300).fadeIn(),f.fadeIn()}),c.on("click",function(){u.addClass("mask-show"),setTimeout(function(){u.fadeOut(function(){$(this).removeClass("active")}),h.fadeIn(300,function(){$(this).addClass("active"),threejsController&&threejsController.onLandLoaded(function(){e()})})},1e3)})}function t(){var e=$(".js-audio")[0],s=j.find(".audio-tips");supportAudio()&&(j.on("click",function(){e.paused?($(this).addClass("audio__pause"),s.removeClass("audio-tips--on"),$(this).attr("title","\u6682\u505c\u97f3\u4e50"),e.play(),GLOBAL.MUSICPAUSE=!1):(GLOBAL.MUSICPAUSE=!0,$(this).removeClass("audio__pause"),$(this).attr("title","\u64ad\u653e\u97f3\u4e50"),s.addClass("audio-tips--on"),e.pause())}),j.on("on",function(){$(this).addClass("audio__pause"),s.removeClass("audio-tips--on"),$(this).attr("title","\u6682\u505c\u97f3\u4e50"),e.play()}).on("off",function(){$(this).removeClass("audio__pause"),$(this).attr("title","\u64ad\u653e\u97f3\u4e50"),s.addClass("audio-tips--on"),e.pause()}))}function n(){m.on("click",function(){var e=$(this).data();arrowState=-1,videoPlayer.open(e.hd,e.hd)}),m.on("mouseover",function(){$(this).find(".js-play-boss-video").addClass("play--hover")}).on("mouseout",function(){$(this).find(".js-play-boss-video").removeClass("play--hover")})}function a(){g.on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),GLOBAL.LANDENABLED=!0,C.length&&EventController.removeMouseGuide(function(){C.remove(),g.remove(),$(".js-nav-p").removeClass("transparent").fadeIn(),$(".js-boss-bg[data-name="+EVENTINFO.currentBoss.name+"]").addClass("boss-bg--active")})})}function i(){n(),t(),o(),a()}var r=bossController.initEvent,l=screenController.initEvent,d=navController.initEvent,c=(screenController.launchFullScreen(document.documentElement),screenController.cancelFullscreen,$(".js-explore")),u=$(".js-enter"),v=$(".js-enter-title"),f=$(".js-enter-subtitle"),h=$(".js-webgl"),m=($(".js-light"),$(".js-boss"),$(".js-webgl-video"),$(".js-boss-video")),j=($(".js-play-boss-video"),$(".js-fullscreen"),$(".js-music")),b=($(".js-nav"),$(".js-enter-text"),[$(".mouse-guide-arrow1"),$(".mouse-guide-arrow2"),$(".mouse-guide-arrow4"),$(".mouse-guide-arrow3")]),g=$(".js-land-mask"),C=$(".js-mouse-guide");return{init:function(){l(),r(),d(),i()},removeMouseGuide:s}}();
;var EVENTINFO={bossList:[],donotdraw:!1},bossNameList={};if(!$.browser.msie&&Detector.webgl)var mudeng,threejsController=function(){function e(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}function t(){L=window.innerHeight,C=window.innerWidth,z=C/2,H=L/2,fogHex=65280,fogDensity=7e-4;var t=1920,o=1080;g=new THREE.CombinedCamera(t/2,o/2,45,.1,1e3,-500,1e3),g.setZoom(.55),g.toPerspective(),f=new THREE.Scene,f.position.set(0,-6,0),f.fog=new THREE.FogExp2(fogHex,fogDensity),T=e()?new THREE.WebGLRenderer:new THREE.CanvasRenderer,T.setClearColor(986638),T.setSize(t,o),g.position.x=0,g.position.y=40,g.position.z=150,g.lookAt(new THREE.Vector3(0,0,0)),document.getElementById("WebGL-output").appendChild(T.domElement),T.domElement.setAttribute("class","maincanvas"),$(".maincanvas").fadeOut();var n=$(".obj-path").data("path");F.loadObj(n)}function o(){requestAnimationFrame(o),g.lookAt(f.position),T.render(f,g),TWEEN.update()}function n(){var e=document.createElement("canvas");e.style.borderRadius="50%",e.style.backgroundColor="transparent";var t=e.getContext("2d"),o=document.getElementById("image-light");e.width=o.width,e.height=o.height,t.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height);var n=new THREE.Texture(e);return n.needsUpdate=!0,n}function a(e){for(var t=(THREE.GeometryUtils.randomPointsInGeometry(e,24e3),[]),o=[],a=[{size:.1,opacity:.1},{size:.2,opacity:1},{size:.4,opacity:1},{size:.3,opacity:1}],s=0,i=a.length;i>s;s++){var r=new THREE.PointCloudMaterial({color:16777215,size:a[s].size,transparent:!0,blending:THREE.AdditiveBlending,map:n(),opacity:a[s].opacity});t.push(r);var c=new THREE.Geometry;o.push(c)}for(var u=e.vertices,s=0;s<u.length;s++){var d=Math.random(),E=u[s],l=Math.random();l>.5?E.x+=Math.random():E.x-=Math.random(),E.z>100&&(E.z-=50),d>.98?o[0].vertices.push(E):d>.96?(d>.97&&(E.z+=Math.random()),o[1].vertices.push(E)):d>.952?(E.z+=Math.random(),o[2].vertices.push(E)):d>.95&&(E.z-=5*Math.random(),o[3].vertices.push(E))}for(var p=[],s=0,i=t.length;i>s;s++){var m=new THREE.Points(o[s],t[s]);m.frustumCulled=!0,m.sortParticles=!0,p.push(m)}var m={cloud1:p[0],cloud2:p[1],cloud3:p[2],cloud4:p[3]};return m}function s(){var e=a(x);for(var t in e)e[t].position.set(30,30,100),e[t].geometry.colorsNeedUpdate=!0,e[t].name="land"+(A.length+1),f.add(e[t]),A.push(e[t]);for(var o=[A[0].clone(),A[1].clone(),A[2].clone(),A[3].clone()],n=[A[0].clone(),A[1].clone(),A[2].clone(),A[3].clone()],s=[{x:100,y:30,z:100},{x:-80,y:30,z:100}],r=0;4>r;r++)o[r].name="extraLand"+(r+1),o[r].position.set(s[0].x,s[0].y,s[0].z),f.add(o[r]);for(var r=0;4>r;r++)n[r].name="extraLand"+(r+1),n[r].position.set(s[1].x,s[1].y,s[1].z),f.add(n[r]);i()}function i(){for(var e=[],t=A[0].geometry.vertices.concat(A[1].geometry.vertices).concat(A[2].geometry.vertices),o=g.position.z,n=[],a=[],s=0,i=t.length;i>s;s+=2)o-t[s].z<100&&n.push(t[s]);for(var s=0,i=4;4>s;s++)e.push(n[Math.floor(Math.random()*n.length-1)]);e.sort(function(e,t){return e.z<t.z});var r=new THREE.TextureLoader;r.crossOrigin="anonymous";var c=document.getElementById("icon4"),u=r.load(c.src),d=new THREE.PlaneGeometry(2,2,2),E=new THREE.MeshLambertMaterial({color:16777215,map:u,transparent:!0,side:THREE.DoubleSide,opacity:1});boxMesh=new THREE.Mesh(d,E),boxMesh.position.set(.12,35.56,143.7),boxMesh.rotation.x=-.4,boxMesh.name="xiaoguai",f.add(boxMesh),a.push(boxMesh),EVENTINFO.bossList.push(boxMesh),EVENTINFO.currentBoss=boxMesh,W.push(boxMesh),c=document.getElementById("icon1"),u=r.load(c.src),d=new THREE.PlaneGeometry(2,2,1),E=new THREE.MeshLambertMaterial({color:16777215,map:u,transparent:!0,side:THREE.DoubleSide,opacity:.3}),boxMesh=new THREE.Mesh(d,E),boxMesh.position.set(7.82,35.5,136.74),boxMesh.rotation.x=-.4,boxMesh.name="kaibuli",f.add(boxMesh),a.push(boxMesh),EVENTINFO.bossList.push(boxMesh),c=document.getElementById("icon2"),u=r.load(c.src+"?v="),d=new THREE.PlaneGeometry(2,2,2),E=new THREE.MeshLambertMaterial({color:16777215,map:u,transparent:!0,side:THREE.DoubleSide,opacity:.3}),boxMesh=new THREE.Mesh(d,E),boxMesh.position.set(-5.88,35.56,131.24),boxMesh.rotation.x=-.4,boxMesh.name="yanmo",f.add(boxMesh),a.push(boxMesh),EVENTINFO.bossList.push(boxMesh),c=document.getElementById("icon3"),u=r.load(c.src),d=new THREE.PlaneGeometry(2,2,2),E=new THREE.MeshLambertMaterial({color:16777215,map:u,transparent:!0,side:THREE.DoubleSide,opacity:.3}),boxMesh=new THREE.Mesh(d,E),boxMesh.position.set(19.66,36.54,124.84),boxMesh.rotation.x=-.3,boxMesh.rotation.z=.1,boxMesh.name="mudeng",f.add(boxMesh),a.push(boxMesh),EVENTINFO.bossList.push(boxMesh);var l=new THREE.PointLight(14128983,7.5,600);l.castShadow=!0,l.position.x=g.position.x+100,l.position.y=g.position.y+120,l.position.z=g.position.z+50,l.castShadow=!0,f.add(l);for(var p=a[0].position.x,m=a[0].position.z,h=p,b=p,v=m,T=m,s=1,i=a.length;i>s;s++){var x=a[s].position.x,w=(a[s].position.y,a[s].position.z);h>x&&(h=x),x>b&&(b=x),v>w&&(v=w),w>T&&(T=w)}y=h-10,N=b+10,O=v-10,M=T+10}function r(e){if(e.stopPropagation(),e.preventDefault(),I.x=e.clientX/window.innerWidth*2-1,I.y=2*-(e.clientY/window.innerHeight)+1,GLOBAL.LANDENABLED){R.setFromCamera(I,g);var t=R.intersectObjects(f.children,!0);if(t.length>0&&!U){var o=t[0];if("kaibuli"===o.object.name||"yanmo"===o.object.name||"mudeng"===o.object.name||"xiaoguai"===o.object.name){U=!0;var n;switch(o.object.name){case"xiaoguai":n=1;break;case"kaibuli":n=2;break;case"yanmo":n=3;break;case"mudeng":n=4;break;default:n=1}GLOBAL.MODE2ENABLED=!0,bossController.showBoss(n)}}}}function c(e){if(e.stopPropagation(),e.preventDefault(),I.x=e.clientX/window.innerWidth*2-1,I.y=2*-(e.clientY/window.innerHeight)+1,GLOBAL.LANDENABLED)if(D){B=!1;var t={x:0,z:0},o=I;w&&w.stop(),w=null,V.css({cursor:"pointer"}),w=new TWEEN.Tween(t).to(o,3e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){o.y>0?g.position.z<M&&(g.position.z+=.1*o.y):g.position.z>O&&(g.position.z+=.1*o.y),o.x>0?g.position.x<N&&(g.position.x+=.1*o.x):g.position.x>y&&(g.position.x+=.1*o.x)}).onComplete(function(){}).start()}else{R.setFromCamera(I,g);var n=R.intersectObjects(f.children,!0);if(n.length>0){var a=n[0];"kaibuli"===a.object.name||"yanmo"===a.object.name||"mudeng"===a.object.name||"xiaoguai"===a.object.name?(mtime=new Date,stopTween=!1,b(a.object),V.css({cursor:"pointer"})):(v(),V.css({cursor:"move"}),stopTween=!0)}else V.css({cursor:"default"})}}function u(e){$(".maincanvas").fadeIn(1e3);var t={x:0,y:-6,z:0},o={x:0,y:0,z:0};new TWEEN.Tween(t).to(o,1e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){f.position.set(t.x,t.y,t.z)}).onComplete(function(){setTimeout(function(){e&&e()},300)}).start()}function d(){for(var e=EVENTINFO.currentBoss,t=EVENTINFO.bossList,o=0,n=t.length;n>o;o++)!function(o){var n=t[o],a={opacity:n.material.opacity};if(n===e){var s={opacity:1};new TWEEN.Tween(a).to(s,100).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){n.material.opacity=a.opacity}).onComplete(function(){}).start()}else if(a.opacity>.3){var s={opacity:.3};new TWEEN.Tween(a).to(s,1e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){n.material.opacity=a.opacity}).onComplete(function(){}).start()}}(o)}function E(e,t){var o=g.position,n={x:e.position.x,y:e.position.y+5,z:e.position.z+8};j.removeClass("boss-bg--active"),$(".js-boss-bg[data-name="+EVENTINFO.currentBoss.name+"]").addClass("boss-bg--active"),new TWEEN.Tween(o).to(n,1e3).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){g.position.set(o.x,o.y,o.z)}).onComplete(function(){g.position.set(n.x,n.y,n.z),U=!1,d(),setTimeout(function(){t&&t()},300)}).start()}function l(e){e.stopPropagation(),e.preventDefault(),I.x=event.clientX/window.innerWidth*2-1,I.y=2*-(event.clientY/window.innerHeight)+1,D=!0}function p(e){e.stopPropagation(),e.preventDefault(),I.x=event.clientX/window.innerWidth*2-1,I.y=2*-(event.clientY/window.innerHeight)+1,D=!1,w&&setTimeout(function(){w.stop()},100)}function m(e){var t=$(".maincanvas"),o=g.position;o.op=1;var n={x:g.position.x,y:g.position.y,z:20,op:0};j.removeClass("boss-bg--active"),new TWEEN.Tween(o).to(n,500).easing(TWEEN.Easing.Linear.None).onUpdate(function(){g.position.z=o.z,t.css("opacity",o.op)}).onComplete(function(){e&&e(),U=!1,t.parent().removeClass("active").addClass("hide")}).start()}function h(){$(".js-boss").fadeOut(function(){$(this).parent().removeClass("active").addClass("hide")});var e=$(".maincanvas"),t=g.position;t.op=0;var o={x:0,y:40,z:150,op:1};GLOBAL.MODE2ENABLED=!1,new TWEEN.Tween(t).to(o,1800).easing(TWEEN.Easing.Linear.None).onUpdate(function(){g.position.z=t.z,e.css("opacity",t.op)}).onComplete(function(){U=!1,EVENTINFO.currentBoss=EVENTINFO.bossList[0],$(".js-boss-bg[data-name="+EVENTINFO.currentBoss.name+"]").addClass("boss-bg--active"),d(),$(".js-nav").removeClass("nav__list--active"),$(".js-nav").eq(0).addClass("nav__list--active")}).start()}function b(e){var t=e.name,o=e;if(j.removeClass("boss-bg--active"),$(".js-boss-bg[data-name="+t+"]").addClass("boss-bg--active"),t!==EVENTINFO.currentBoss.name&&-1===P.indexOf(t)){P.push(t),k.push(e);var n={bossOpactiy:o.material.opacity,size:o.scale.x};new TWEEN.Tween(n).to({bossOpactiy:1},500).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){o.material.opacity=n.bossOpactiy}).onComplete(function(){}).start()}}function v(){if(P.length>0){var e=(P.shift(),k.shift());j.removeClass("boss-bg--active"),$(".js-boss-bg[data-name="+EVENTINFO.currentBoss.name+"]").addClass("boss-bg--active");var t={bossOpacity:e.material.opacity};e!==EVENTINFO.currentBoss&&new TWEEN.Tween(t).to({bossOpacity:.3},500).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.material.opacity=t.bossOpacity}).onComplete(function(){}).start()}}{var g,f,T,x,w,y,N,O,M,L,C,z,H,R=new THREE.Raycaster,I=new THREE.Vector2,D=!1,B=!0,W=[],j=$(".js-boss-bg"),F=function(){function e(e){var o=new THREE.OBJLoader(t);o.crossOrigin="anonymous",o.load(e,function(e){e.traverse(function(e){void 0!==e.geometry}),e.children[0].name="diqiu",earthobj=e.children[0],e.name="test1",x=(new THREE.Geometry).fromBufferGeometry(earthobj.geometry),s(x)},i,r)}var t=new THREE.LoadingManager;t.onProgress=function(){};var o=154,n=(new THREE.Texture,$(".js-loading-progress")),a=$(".js-loading-text"),i=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,s=Math.round(t,2)/100;GLOBAL.LOADINGTEXTFINISH?100===Math.round(t,2)?(n.css("width",s*o+"px"),a.html(Math.round(t,2)),viewController.onObjLoaded()):(n.css("width",s*o+"px"),a.html(Math.round(t,2))):100===Math.round(t,2)?(n.css("width",s*o+"px"),a.html(Math.round(t,2)),checkLoadingFinish()):(n.css("width",s*o+"px"),a.html(Math.round(t,2)))}},r=function(){};return{loadObj:e}}(),A=[],V=$("#WebGL-output"),G=$("#WebGL-output");G[0]}G.on("mousemove",function(e){e.stopPropagation(),e.preventDefault();var t=$(e.target);t.hasClass("maincanvas")&&c(e)}).on("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(e.target);t.hasClass("maincanvas")&&r(e)}).on("mousedown",function(e){e.stopPropagation(),e.preventDefault();var t=$(e.target);t.hasClass("maincanvas")&&l(e)}).on("mouseup",function(e){e.stopPropagation(),e.preventDefault();var t=$(e.target);t.hasClass("maincanvas")&&p(e)});var P=[],k=[],U=!1;return G.on("mousewheel DOMMouseScroll",function(e){if(e.stopPropagation(),e.preventDefault(),GLOBAL.LANDENABLED){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail||e.deltaY;if(!U&&GLOBAL.DRAWDOWN)if(U=!0,0>t){var o=EVENTINFO.currentBoss,n=EVENTINFO.bossList.indexOf(o),a=n===EVENTINFO.bossList.length-1?null:EVENTINFO.bossList[n+1];if(null!==a){var s=EVENTINFO.bossList.indexOf(a)+1;$(".js-nav[data-bind="+s+"]").trigger("activemouse")}else U=!1,GLOBAL.DRAWDOWN=!0}else{var o=EVENTINFO.currentBoss,n=EVENTINFO.bossList.indexOf(o),i=0===n?null:EVENTINFO.bossList[n-1];if(null!==i){var s=EVENTINFO.bossList.indexOf(i)+1;$(".js-nav[data-bind="+s+"]").trigger("activemouse")}else U=!1,GLOBAL.DRAWDOWN=!0}}}),{land2Boss:m,boss2Land:h,camera2TargetPosition:E,init:t,render:o,onLandLoaded:u,camera:function(){return g},scene:function(){return f}}}();
;var RAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),GLOBAL={INTROPARTICLESHOW:!1,MODE2ENABLED:!1,DRAWDOWN:!0,LOADINGTEXTFINISH:!1,DRAWFALG:1,MOUSEGUIDECANCLEAR:!1,LANDENABLED:!1,MUSICPAUSE:!1},bossHoverIntroPos={},boss=["xiaoguai","kaibuli","mudeng","yanmo"];!function(){for(var t=0;4>t;t++){var n=boss[t],i={x:0,y:0};bossHoverIntroPos[n]=i}}();var introController={showIntroduce:function(t,n){support("canvas")&&(GLOBAL.DRAWFALG=0,GLOBAL.DRAWDOWN&&(GLOBAL.DRAWDOWN=!1,draw.clearCanvas(),draw.drawIntroduce(t,function(){setTimeout(function(){n&&n()},1e3)})))},clearIntroduce:function(){support("canvas")&&draw.clearCanvas()},showHoverIntroduce:function(){},clearHoverIntroduce:function(){}},draw=function(){function t(){GLOBAL.BACKSHOW||(GLOBAL.BACKSHOW=!0)}function n(t,n){if(A){GLOBAL.INTROPARTICLESHOW=!0;var i=$(".js-introduce-image[data-name="+t+"]"),e=i.attr("data-dr"),r=i.attr("data-idx");if(null!==i){u=2,null!==e&&(u=parseInt(e)),A.clearRect(0,0,f.width,f.height),g=[],R=!0,L=!1,w=r;var s=v[w-1];s||(m.src=i.find("img").attr("src"),s=m),i.html().indexOf("img")>=0&&a(s,function(){A.drawImage(s,0,0,s.width,s.height,f.width/2-s.width/2,10,s.width,s.height),g=c(),o(n)})}}}function i(){v=[],$(".js-introduce-image").each(function(t,n){var i=new Image;i.onload=function(){v.push(i)},i.src=$(n).find("img").attr("src")})}function a(t,n){t.complete?n.call(t):t.onload=function(){n.call(this)}}function o(t){g.forEach(function(){this.tx=r(d,d+50),this.ty=r(l+50,l+100),this.x=r(d,d+200),this.y=r(l+400,l+600)}),g.sort(function(t,n){return n.x-t.x}),g.forEach(function(){this.paint()}),I=new Date,t&&(GLOBAL.cb=t),e()}function e(){animateRunning=!0;var t=+new Date,n=.1,i=0;A.save(),A.globalCompositeOperation="destination-out",A.globalAlpha=.1,A.clearRect(0,0,f.width,f.height),A.restore(),I=+new Date,g.forEach(function(){var a=this;return this.pause?void i++:(a.dx===a.x&&a.dy===a.y?this.pause=!0:t-I>300?(a.x=a.dx,a.y=a.dy,this.pause=!0):(a.x=Math.floor(a.x+(a.dx-a.x)*n),a.y=Math.floor(a.y+(a.dy-a.y)*n)),void(this.pause&&i++))}),g.sort(function(t,n){return n.x-t.x}),g.forEach(function(){this.paint()}),i===g.length&&(L=!0),L?(GLOBAL.cb&&GLOBAL.cb(),GLOBAL.INTROPARTICLESHOW=!1,GLOBAL.DRAWDOWN=!0):RAF(e)}function r(t,n){return Math.floor(Math.random()*(n-t)+t)}function c(){var t=A.getImageData(0,0,f.width,f.height);A.clearRect(0,0,f.width,f.height);for(var n=[],i=0;i<t.width;i+=u)for(var a=0;a<t.height;a+=1){var o=4*(a*t.width+i);if(t.data[o+3]>0){var e=new O(i,a,0,u,{a:t.data[o],b:t.data[o+1],c:t.data[o+2],d:t.data[o+3]});n.push(e)}}return n}function s(){p=!0,L=!0,clearTimeout(x),x=0,A.clearRect(0,0,f.width,f.height)}function h(){A.clearRect(0,0,f.width,f.height)}if(support("canvas")){var u,d=600,l=300,f=document.getElementById("intro-canvas-id");if(f.getContext("2d")){var A=(document.querySelectorAll(".ele"),f.getContext("2d")),w=(document.getElementById("back-canvas-id"),0),m=new Image,v=[],L=!1,g=[],O=function(t,n,i,a,o){this.dx=t,this.dy=n,this.tx=0,this.ty=0,this.x=800,this.y=800,this.radius=.5,this.color=o};O.prototype={paint:function(){A.save(),A.beginPath();this.color.d;A.fillStyle="rgba("+this.color.a+","+this.color.b+","+this.color.c+","+this.color.d/255+")",A.fillRect(this.x,this.y,1,1),A.restore()}},Array.prototype.forEach=function(t){for(var n=0;n<this.length;n++)t.call(this[n])};var I,R=!0,p=!1,x=0;return{init:i,start:n,context:A,loadImage:i,stop:s,clearCanvas:h,drawIntroduce:n,drawBack:t}}}}();
;var Viewport=function(){var i=[],t=0,h={on:function(t,h){i.push({eventName:t,handler:h})},off:function(t){for(var h=t.split("."),e=h.length>1,n=0;n<i.length;n++)(e?i[n].eventName===t:i[n].eventName===h[0])&&(i.splice(n,1),n--)},trigger:function(t,h){for(var e=0;e<i.length;e++)if(i[e].eventName.split(".")[0]===t&&i[e].handler(h)===!1)return},normalWidth:1920,normalHeight:1080,minWidth:1300,minHeight:800,width:0,height:0,$el:$(".js-viewport"),$content:$(".js-container"),resize:function(){this.windowWidth=$(window).width(),this.windowHeight=$(window).height(),this.windowWidth>this.minWidth?(this.width=this.windowWidth,this.$el.css({width:"100%"})):(this.width=this.minWidth,this.$el.css({width:this.minWidth})),this.windowHeight>this.minHeight?(this.height=this.windowHeight,this.$el.css({height:"100%"})):(this.height=this.minHeight,this.$el.css({height:this.minHeight})),this.left=(this.width-this.normalWidth)/2,this.top=(this.height-this.normalHeight)/2,this.$content.css({marginLeft:this.left,marginTop:this.top})}};return h.$content.css({width:h.normalWidth,height:h.normalHeight}),h.resize(),$(window).resize(function(){t&&clearTimeout(t),t=setTimeout(function(){h.resize(),h.trigger("resize",h)},100)}),h}();
;var Common={};
;function canFullScreen(){return!$.browser.msie}function supportAudio(){var e=document.createElement("audio");return!!e.canPlayType}$(document).ready(function(){var e=$(window).width(),s=$(window).height();if(e>1920){var o=(e-1920)/2,a=(s-1080)/2;$(".logo").css({marginLeft:o+"px",marginTop:a+"px"}),$(".js-controller").css({marginRight:o+"px",marginTop:a+"px"})}if(canFullScreen()||($(".controller--fullscreen").remove(),$(".js-enter-subtitle").addClass("ie8-enter__subtitle"),$(".js-explore").addClass("ie8-enter__explore"),$(".js-enter-title").removeClass("enter__title").addClass("ie-enter-title")),/msie 8/.test(navigator.userAgent.toLowerCase())||/(trident)\/([\d.]+)/.test(navigator.userAgent.toLocaleLowerCase())){if(/msie 8/.test(navigator.userAgent.toLowerCase()))$(".controller__audio").remove(),$(".js-explore").addClass("ie8-enter__explore").show(),$(".js-boss-logo").addClass("ie-boss__logo-fix"),$(".boss__name1").addClass("ie-boss-name-fix1"),$(".boss__name2").addClass("ie-boss-name-fix2"),$(".boss__name3").addClass("ie-boss-name-fix3"),$(".boss__name4").addClass("ie-boss-name-fix4"),$(".boss__video-wrap1").addClass("ie8-boss__video-wrap1"),$(".boss__video-wrap2").addClass("ie8-boss__video-wrap2"),$(".boss__video-wrap3").addClass("ie8-boss__video-wrap3");else{$(".js-boss-logo").removeClass("ie-boss__logo-fix"),$(".js-controller").addClass("controller__show"),$(".controller--fullscreen").remove(),$(".js-explore").css({top:"700px",marginTop:"217px"}).show(),/msie 9/.test(navigator.userAgent.toLowerCase())&&$(".js-explore").removeClass("ie8-enter__explore").css({"margin-top":"0px"});var t=$(".js-music"),i=$(".js-audio")[0],n=t.find(".audio-tips");supportAudio()&&(t.on("click",function(){i.paused?($(this).addClass("audio__pause"),n.removeClass("audio-tips--on"),$(this).attr("title","\u6682\u505c\u97f3\u4e50"),i.play(),GLOBAL.MUSICPAUSE=!1):(GLOBAL.MUSICPAUSE=!0,$(this).removeClass("audio__pause"),$(this).attr("title","\u64ad\u653e\u97f3\u4e50"),n.addClass("audio-tips--on"),i.pause())}),t.on("on",function(){$(this).addClass("audio__pause"),n.removeClass("audio-tips--on"),$(this).attr("title","\u6682\u505c\u97f3\u4e50"),i.play()}).on("off",function(){$(this).removeClass("audio__pause"),$(this).attr("title","\u64ad\u653e\u97f3\u4e50"),n.addClass("audio-tips--on"),i.pause()}))}$(".js-boss-bg").remove(),$(".js-loading").remove(),$(".js-mouse-guide").remove(),$(".js-enter-subtitle").addClass("ie8-enter__subtitle"),$(".js-enter-title").removeClass("enter__title").addClass("ie-enter-title"),$(".js-enter-title").show(),$(".js-enter").show(),$(".js-webgl").addClass("ie-land-bg");var r=$(".js-enter"),l=$(".js-webgl");$(".js-land-mask").remove(),$(".js-boss-video").removeClass("transparent"),$(".js-explore").on("click",function(){$(".js-webgl").removeClass("transparent"),setTimeout(function(){r.fadeOut(function(){$(this).removeClass("active")}),$(".js-ie-boss-list").show(),l.fadeIn(300,function(){$(this).addClass("active")})},1e3)}),$(".js-ie-boss").on("click",function(){GLOBAL.MODE2ENABLED=!0;var e=$(this).data("idx");switch($(".js-webgl").hide(),$(".js-nav-p").show(),$(".js-boss-wrap").removeClass("hide"),e){case 1:e=2;break;case 2:e=3;break;case 3:e=4;break;case 4:e=1}$(".js-nav[data-bind="+e+"]").trigger("ieactive")});var d=$(".js-nav");d.on("ieactive",function(){$(this);d.not($(this)).removeClass("nav__list--active").removeClass("nav__list--hover"),$(this).removeClass("nav__list--hover").addClass("nav__list--active");var e=$(this).data("bind");switch(e){case 1:e=4;break;case 2:e=1;break;case 3:e=2;break;case 4:e=3}$(".js-boss").not($(".js-boss"+e)).fadeOut(),$(".js-boss"+e).fadeIn().trigger("active")});var c=$(".js-boss");c.on("active",function(e){mouseX=e.clientX;var s=$(this);setTimeout(function(){s.find(".js-boss-name").animate({top:"108px"},500,function(){s.find(".js-boss-type").fadeTo("slow",1).removeClass("transparent"),s.find(".js-boss-video").fadeTo("slow",1).removeClass("transparent"),s.find(".js-boss-introduce").fadeTo("slow",1).removeClass("transparent")}),s.find(".js-boss-logo").animate({top:"0px"})},800)}).on("leave",function(){var e=$(this);e.find(".js-boss-type").fadeOut(100),e.find(".js-boss-video").fadeOut(100),e.find(".js-boss-introduce").fadeOut(100),e.find(".js-boss-name").animate({top:"-360px"},500,function(){}),e.find(".js-boss-logo").animate({top:"-400px"})}),$(".js-nav").off("click").on("click",function(e){$(".js-webgl").fadeOut(),$(e.target).trigger("ieactive")}),$(".js-back-to-land").off("click").on("click",function(){$(".js-boss").fadeOut(),$(".js-webgl").fadeIn()}),$(".nav__intro").removeClass("transparent"),$(".js-ie-boss-intro-list").addClass("ie-block-fix").show(),$(".intro-canvas").remove();var v;$(".js-ie-boss").on("mouseover",function(){v=$(this).data("idx"),$(".js-ie-boss-intro").not($(".js-ie-boss-intro[data-idx="+v+"]")).hide(),$(".js-ie-boss-intro[data-idx="+v+"]").show()});var u=$(".js-boss-video");u.on("click",function(){var e=$(this).data();arrowState=-1,videoPlayer.open(e.hd,e.hd)}),u.on("mouseover",function(){$(this).find(".js-play-boss-video").addClass("play--hover")}).on("mouseout",function(){$(this).find(".js-play-boss-video").removeClass("play--hover")})}else/msie 11/.test(navigator.userAgent.toLowerCase())&&($(".js-enter-subtitle").addClass("ie8-enter__subtitle"),$(".js-explore").addClass("ie8-enter__explore"),$(".js-enter-title").removeClass("enter__title").addClass("ie-enter-title")),viewController.init(),EventController.init();$(".f-share-icon").hover(function(){$(".f-share-icon").addClass("active")},function(){$(".f-share-icon").removeClass("active")});var f=$("#share"),m=-1;nie.use(["nie.util.shareV5"],function(){nie.util.share({fat:"#share",type:1,defShow:[23,22,2,3],img:"http://res.tianyu.netease.com/qt/15/nichang/images/share.jpg",title:"#\u5929\u8c15\u6709\u7ea6#\u7fe9\u82e5\u60ca\u9e3f\u3001\u5b9b\u5982\u6e38\u9f99\uff0c\u5929\u8c15\u516b\u6708\u6fc0\u60c5\u6709\u7ea6\uff0c\u5168\u65b0\u65f6\u88c5\u3010\u9713\u88f3\u3011\u5e94\u7ea6\u53d1\u5e03\u3002\u70b9\u51fb\u4e00\u7779\u65b0\u65f6\u88c5>> "}),$("#share").find(".NIE-share-txt").remove(),$("#share").find(".morebtn").parent().remove()}),$(".controller__share").hover(function(){f.addClass("share__show")},function(){m=setTimeout(function(){f.removeClass("share__show")},100)}),f.hover(function(){clearTimeout(m)},function(){m=setTimeout(function(){f.removeClass("share__show")},100)}),$(".js-play-boss-video").on("click",function(){$(".js-music").trigger("off");var e=$(this).data();arrowState=-1,videoPlayer.open(e.hd,e.sd)})});